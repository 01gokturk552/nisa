<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bizim Hik√¢yemiz</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:Arial, sans-serif;
  background:#fff;
  color:#333;
}
section{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:40px 20px;
  text-align:center;
}
button{
  padding:12px 28px;
  border:none;
  border-radius:30px;
  background:#e63946;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
button:active{transform:scale(.96);}
.hidden{display:none;}

/* KALP */
.heart{
  width:160px;height:140px;position:relative;margin:20px 0;
}
.heart:before,.heart:after{
  content:"";position:absolute;width:80px;height:120px;
  background:#e63946;border-radius:80px 80px 0 0;top:0;
}
.heart:before{left:80px;transform:rotate(-45deg);transform-origin:0 100%;}
.heart:after{left:0;transform:rotate(45deg);transform-origin:100% 100%;}

/* GALERƒ∞ */
.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
  gap:10px;
  width:100%;
  max-width:900px;
  margin-top:30px;
}
.gallery img{
  width:100%;
  border-radius:10px;
  object-fit:cover;
}

/* ZAMAN KAPS√úL√ú */
textarea{
  width:100%;
  max-width:500px;
  height:120px;
  padding:12px;
  border-radius:10px;
  border:1px solid #ccc;
  resize:none;
}
</style>
</head>
<body>

<!-- BA≈ûLANGI√á -->
<section id="start">
  <h2>L√ºtfen ekrana dokunun</h2>
  <button onclick="start()">Ba≈ülat ‚ù§Ô∏è</button>
</section>

<!-- ANA -->
<section id="main" class="hidden">
  <div class="heart"></div>
  <h2>√ñz√ºr dilerim‚Ä¶</h2>
  <p>Seni kƒ±rmak istememi≈ütim ‚ù§Ô∏è</p>
</section>

<!-- GALERƒ∞ -->
<section id="gallerySection" class="hidden">
  <h2>Bizim Anƒ±larƒ±mƒ±z üì∏</h2>
  <div class="gallery" id="gallery"></div>
</section>

<!-- ZAMAN KAPS√úL√ú -->
<section id="capsuleSection" class="hidden">
  <h2>1 Ay Sonra A√ßƒ±lacak Mesaj ‚è≥</h2>
  <div id="capsuleContent"></div>
</section>

<audio id="music" src="derdim.mp3"></audio>

<script>
/* BA≈ûLAT */
function start(){
  document.getElementById("start").classList.add("hidden");
  document.getElementById("main").classList.remove("hidden");
  document.getElementById("gallerySection").classList.remove("hidden");
  document.getElementById("capsuleSection").classList.remove("hidden");

  const music=document.getElementById("music");
  music.volume=0.6;
  music.play().catch(()=>{});

  loadGallery();
  loadCapsule();
}

/* GALERƒ∞ (kod deƒüi≈ütirmeden foto ekleme) */
function loadGallery(){
  const gallery=document.getElementById("gallery");
  let i=1;
  function tryLoad(){
    const img=new Image();
    img.src=`gallery/${i}.jpg`;
    img.onload=()=>{
      gallery.appendChild(img);
      i++;
      tryLoad();
    };
  }
  tryLoad();
}

/* ZAMAN KAPS√úL√ú */
function loadCapsule(){
  const box=document.getElementById("capsuleContent");
  const saved=localStorage.getItem("capsuleMessage");
  const date=localStorage.getItem("capsuleDate");

  if(!saved){
    box.innerHTML=`
      <textarea id="capsuleText" placeholder="1 ay sonra okunacak mesaj..."></textarea><br><br>
      <button onclick="saveCapsule()">Kilitle üîí</button>
    `;
  }else{
    const diff=(Date.now()-Number(date))/(1000*60*60*24);
    if(diff<30){
      box.innerHTML=`<p>Mesaj kilitli‚Ä¶<br>${Math.ceil(30-diff)} g√ºn kaldƒ± ‚è≥</p>`;
    }else{
      box.innerHTML=`<p>${saved}</p>`;
    }
  }
}

function saveCapsule(){
  const text=document.getElementById("capsuleText").value.trim();
  if(!text) return;
  localStorage.setItem("capsuleMessage",text);
  localStorage.setItem("capsuleDate",Date.now());
  loadCapsule();
}
</script>

</body>
</html>
